@tailwind base;
@tailwind components;
@tailwind utilities;

/* Telegram Mini App оптимизация */
@layer base {
  html {
    font-size: 16px;
    -webkit-text-size-adjust: 100%;
  }
  
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    background-color: var(--tg-theme-bg-color, #ffffff);
    color: var(--tg-theme-text-color, #000000);
    margin: 0;
    padding: 0;
    overscroll-behavior: none;
  }
}

@layer components {
  /* Мобильные кнопки */
  .btn-mobile {
    @apply min-h-[48px] px-6 py-3 text-base font-medium rounded-xl transition-all duration-200;
    @apply active:scale-95 focus:outline-none focus:ring-2 focus:ring-offset-2;
    touch-action: manipulation;
  }
  
  .btn-primary-mobile {
    @apply btn-mobile bg-blue-500 text-white;
    @apply hover:bg-blue-600 focus:ring-blue-500;
    @apply active:bg-blue-700;
  }
  
  .btn-secondary-mobile {
    @apply btn-mobile bg-gray-100 text-gray-900 border border-gray-300;
    @apply hover:bg-gray-200 focus:ring-gray-500;
    @apply active:bg-gray-300;
  }
  
  /* Мобильные карточки */
  .card-mobile {
    @apply bg-white rounded-2xl shadow-sm border border-gray-100 p-4;
    @apply transition-all duration-200 active:scale-[0.98];
  }
  
  /* Мобильные инпуты */
  .input-mobile {
    @apply w-full min-h-[48px] px-4 py-3 text-base rounded-xl border border-gray-300;
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;
    @apply transition-all duration-200;
    -webkit-appearance: none;
    font-size: 16px; /* Предотвращает зум на iOS */
  }
  
  /* Безопасная зона для iPhone */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }
  
  /* Контейнер для мобильного приложения */
  .mobile-container {
    @apply min-h-screen bg-gray-50 safe-area-top safe-area-bottom;
  }
  
  /* Навигация для мобильных */
  .mobile-nav {
    @apply fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 safe-area-bottom;
    @apply flex items-center justify-around py-2 px-4;
    z-index: 50;
  }
  
  .mobile-nav-item {
    @apply flex flex-col items-center justify-center p-2 rounded-lg;
    @apply transition-all duration-200 active:scale-95;
    @apply min-w-[60px] min-h-[60px];
  }
  
  .mobile-nav-item.active {
    @apply bg-blue-50 text-blue-600;
  }
  
  /* Контент с отступом для нижней навигации */
  .content-with-nav {
    @apply pb-20;
  }
  
  /* Заголовки для мобильных */
  .mobile-header {
    @apply sticky top-0 bg-white/95 backdrop-blur-sm border-b border-gray-200 safe-area-top;
    @apply px-4 py-3 flex items-center justify-between;
    z-index: 40;
  }
  
  /* Модальные окна для мобильных */
  .mobile-modal {
    @apply fixed inset-0 bg-black/50 flex items-end justify-center p-0;
    z-index: 100;
  }
  
  .mobile-modal-content {
    @apply bg-white rounded-t-3xl w-full max-h-[90vh] overflow-y-auto;
    @apply safe-area-bottom;
  }
  
  /* Списки для мобильных */
  .mobile-list-item {
    @apply flex items-center justify-between p-4 border-b border-gray-100;
    @apply active:bg-gray-50 transition-colors duration-150;
  }
  
  /* Скрытие скроллбара */
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
}

@layer utilities {
  /* Утилиты для тач-интерфейса */
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  .no-touch-callout {
    -webkit-touch-callout: none;
  }
  
  .no-user-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  /* Анимации для мобильных */
  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }
  
  .animate-slide-down {
    animation: slideDown 0.3s ease-out;
  }
  
  .animate-fade-in {
    animation: fadeIn 0.2s ease-out;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideDown {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Telegram Web App переменные */
:root {
  --tg-viewport-height: 100vh;
  --tg-viewport-stable-height: 100vh;
}

/* Адаптация под Telegram цвета */
.tg-bg {
  background-color: var(--tg-theme-bg-color, #ffffff);
}

.tg-text {
  color: var(--tg-theme-text-color, #000000);
}

.tg-hint {
  color: var(--tg-theme-hint-color, #999999);
}

.tg-link {
  color: var(--tg-theme-link-color, #3b82f6);
}

.tg-button {
  background-color: var(--tg-theme-button-color, #3b82f6);
  color: var(--tg-theme-button-text-color, #ffffff);
}

.tg-secondary-bg {
  background-color: var(--tg-theme-secondary-bg-color, #f1f5f9);
}
